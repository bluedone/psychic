<!DOCTYPE html><html class="no-js" lang="en"><head><!-- Google Tag Manager -->
<script type="text/javascript" async="" src="https://snap.licdn.com/li.lms-analytics/insight.min.js"></script><script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script><script async="" src="https://www.googletagmanager.com/gtm.js?id=GTM-NLGDMK5"></script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NLGDMK5');</script>
<!-- End Google Tag Manager -->
<meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/">
<meta property="og:title" content="MLflow">
<meta property="og:type" content="website">
<meta property="og:url" content="http://docs.bentoml.org/integrations/mlflow.html">
<meta property="og:site_name" content="BentoML Documentation">
<meta property="og:description" content="MLflow is an open source framework for tracking ML experiments, packaging ML code for training pipelines, and capturing models logged from experiments. It enables data scientists to iterate quickly...">
<meta property="og:image" content="https://docs.bentoml.org/en/latest/_images/bentoml-banner.png">
<meta property="og:image:alt" content="BentoML Documentation">
<meta name="description" content="MLflow is an open source framework for tracking ML experiments, packaging ML code for training pipelines, and capturing models logged from experiments. It enables data scientists to iterate quickly...">
<link rel="index" title="Index" href="../genindex.html"><link rel="search" title="Search" href="../search.html"><link rel="next" title="Spark" href="spark.html"><link rel="prev" title="Kubeflow" href="kubeflow.html">
        <link rel="canonical" href="https://docs.bentoml.org/en/latest/integrations/mlflow.html">

    <link rel="shortcut icon" href="../_static/favicon-96x96.ico"><!-- Generated with Sphinx 5.3.0 and Furo 2023.03.27 -->
<script>
window.Papercups = {
    config: {
        // Pass in your Papercups account token here after signing up
        accountId: '25ad5fd9-293b-4e0f-9601-5b0cd7846b48',
        token: '25ad5fd9-293b-4e0f-9601-5b0cd7846b48',
        inbox: 'ac3ebd50-fc10-4299-9a1c-496841b49a6f',
        title: 'Welcome to BentoML!',
        subtitle: 'Ask us anything in the chat window below 😊',
        // newMessagePlaceholder: 'Start typing...',
        primaryColor: '#47AFD1',
        // Optionally pass in a default greeting
        greeting: "Hi there! How can I help you? If we couldn't get back to you in " +
                "time, feel free to join our community on slack and post your " +
                "question in the #support channel: https://l.linklyhq.com/l/ktOX",
        // Optionally pass in metadata to identify the customer
        // customer: {
        //   name: 'Test User',
        //   email: 'test@test.com',
        //   external_id: '123',
        //   metadata: {version: 1, plan: 'premium'}, // Custom fields go here
        // },
        // Optionally specify the base URL
        baseUrl: 'https://yatai-community-papercups.herokuapp.com',
        // Add this if you want to require the customer to enter
        // their email before being able to send you a message
        requireEmailUpfront: true,
        // Add this if you want to indicate when you/your agents
        // are online or offline to your customers
        showAgentAvailability: true,
    },
};
</script>
<script type="text/javascript" async="" defer="" src="https://app.papercups.io/widget.js"></script>

        <title>MLflow - BentoML</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css">
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53">
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css">
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css">
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster.custom.css">
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster.bundle.min.css">
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-shadow.min.css">
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-punk.min.css">
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-noir.min.css">
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-light.min.css">
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-borderless.min.css">
    <link rel="stylesheet" type="text/css" href="../_static/css/micromodal.css">
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css">
    <link rel="stylesheet" type="text/css" href="/_/static/css/badge_only.css">
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e">
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css">
    
    


<style>
  body {
    --color-code-background: #3f3f3f;
  --color-code-foreground: #dcdccc;
  --color-brand-primary: #44a4c6 ;
  --color-brand-content: #44a4c6 ;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  --color-brand-primary: #c9378a ;
  --color-brand-content: #c9378a ;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  --color-brand-primary: #c9378a ;
  --color-brand-content: #c9378a ;
  
      }
    }
  }
</style>
<!-- RTD Extra Head -->

<link rel="stylesheet" href="/_/static/css/readthedocs-doc-embed.css" type="text/css">

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": true, "api_host": "https://readthedocs.org", "build_date": "2023-03-27T14:27:41Z", "builder": "sphinx", "canonical_url": null, "commit": "6b4da8fe", "docroot": "/docs/source/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "integrations/mlflow", "programming_language": "py", "project": "bentoml", "proxied_api_host": "/_", "source_suffix": ".rst", "subprojects": {"yatai": "https://docs.bentoml.org/projects/yatai/en/latest/"}, "theme": "furo", "user_analytics_code": "UA-112879361-4", "version": "latest"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="/_/static/javascript/readthedocs-analytics.js" async="async"></script>

<!-- end RTD <extrahead> -->
<style type="text/css">.CtxtMenu_InfoClose {  top:.2em; right:.2em;}
.CtxtMenu_InfoContent {  overflow:auto; text-align:left; font-size:80%;  padding:.4em .6em; border:1px inset; margin:1em 0px;  max-height:20em; max-width:30em; background-color:#EEEEEE;  white-space:normal;}
.CtxtMenu_Info.CtxtMenu_MousePost {outline:none;}
.CtxtMenu_Info {  position:fixed; left:50%; width:auto; text-align:center;  border:3px outset; padding:1em 2em; background-color:#DDDDDD;  color:black;  cursor:default; font-family:message-box; font-size:120%;  font-style:normal; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 15px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius:15px;               /* Safari and Chrome */  -moz-border-radius:15px;                  /* Firefox */  -khtml-border-radius:15px;                /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */  filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color="gray", Positive="true"); /* IE */}
</style><style type="text/css">.CtxtMenu_MenuClose {  position:absolute;  cursor:pointer;  display:inline-block;  border:2px solid #AAA;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  font-family: "Courier New", Courier;  font-size:24px;  color:#F0F0F0}
.CtxtMenu_MenuClose span {  display:block; background-color:#AAA; border:1.5px solid;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  line-height:0;  padding:8px 0 6px     /* may need to be browser-specific */}
.CtxtMenu_MenuClose:hover {  color:white!important;  border:2px solid #CCC!important}
.CtxtMenu_MenuClose:hover span {  background-color:#CCC!important}
.CtxtMenu_MenuClose:hover:focus {  outline:none}
</style><style type="text/css">.CtxtMenu_Menu {  position:absolute;  background-color:white;  color:black;  width:auto; padding:5px 0px;  border:1px solid #CCCCCC; margin:0; cursor:default;  font: menu; text-align:left; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 5px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius: 5px;             /* Safari and Chrome */  -moz-border-radius: 5px;                /* Firefox */  -khtml-border-radius: 5px;              /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */}
.CtxtMenu_MenuItem {  padding: 1px 2em;  background:transparent;}
.CtxtMenu_MenuArrow {  position:absolute; right:.5em; padding-top:.25em; color:#666666;  font-family: null; font-size: .75em}
.CtxtMenu_MenuActive .CtxtMenu_MenuArrow {color:white}
.CtxtMenu_MenuArrow.CtxtMenu_RTL {left:.5em; right:auto}
.CtxtMenu_MenuCheck {  position:absolute; left:.7em;  font-family: null}
.CtxtMenu_MenuCheck.CtxtMenu_RTL { right:.7em; left:auto }
.CtxtMenu_MenuRadioCheck {  position:absolute; left: .7em;}
.CtxtMenu_MenuRadioCheck.CtxtMenu_RTL {  right: .7em; left:auto}
.CtxtMenu_MenuInputBox {  padding-left: 1em; right:.5em; color:#666666;  font-family: null;}
.CtxtMenu_MenuInputBox.CtxtMenu_RTL {  left: .1em;}
.CtxtMenu_MenuComboBox {  left:.1em; padding-bottom:.5em;}
.CtxtMenu_MenuSlider {  left: .1em;}
.CtxtMenu_SliderValue {  position:absolute; right:.1em; padding-top:.25em; color:#333333;  font-size: .75em}
.CtxtMenu_SliderBar {  outline: none; background: #d3d3d3}
.CtxtMenu_MenuLabel {  padding: 1px 2em 3px 1.33em;  font-style:italic}
.CtxtMenu_MenuRule {  border-top: 1px solid #DDDDDD;  margin: 4px 3px;}
.CtxtMenu_MenuDisabled {  color:GrayText}
.CtxtMenu_MenuActive {  background-color: #606872;  color: white;}
.CtxtMenu_MenuDisabled:focus {  background-color: #E8E8E8}
.CtxtMenu_MenuLabel:focus {  background-color: #E8E8E8}
.CtxtMenu_ContextMenu:focus {  outline:none}
.CtxtMenu_ContextMenu .CtxtMenu_MenuItem:focus {  outline:none}
.CtxtMenu_SelectionMenu {  position:relative; float:left;  border-bottom: none; -webkit-box-shadow:none; -webkit-border-radius:0px; }
.CtxtMenu_SelectionItem {  padding-right: 1em;}
.CtxtMenu_Selection {  right: 40%; width:50%; }
.CtxtMenu_SelectionBox {  padding: 0em; max-height:20em; max-width: none;  background-color:#FFFFFF;}
.CtxtMenu_SelectionDivider {  clear: both; border-top: 2px solid #000000;}
.CtxtMenu_Menu .CtxtMenu_MenuClose {  top:-10px; left:-10px}
</style><style id="MJX-CHTML-styles">
mjx-container[jax="CHTML"] {
  line-height: 0;
}

mjx-container [space="1"] {
  margin-left: .111em;
}

mjx-container [space="2"] {
  margin-left: .167em;
}

mjx-container [space="3"] {
  margin-left: .222em;
}

mjx-container [space="4"] {
  margin-left: .278em;
}

mjx-container [space="5"] {
  margin-left: .333em;
}

mjx-container [rspace="1"] {
  margin-right: .111em;
}

mjx-container [rspace="2"] {
  margin-right: .167em;
}

mjx-container [rspace="3"] {
  margin-right: .222em;
}

mjx-container [rspace="4"] {
  margin-right: .278em;
}

mjx-container [rspace="5"] {
  margin-right: .333em;
}

mjx-container [size="s"] {
  font-size: 70.7%;
}

mjx-container [size="ss"] {
  font-size: 50%;
}

mjx-container [size="Tn"] {
  font-size: 60%;
}

mjx-container [size="sm"] {
  font-size: 85%;
}

mjx-container [size="lg"] {
  font-size: 120%;
}

mjx-container [size="Lg"] {
  font-size: 144%;
}

mjx-container [size="LG"] {
  font-size: 173%;
}

mjx-container [size="hg"] {
  font-size: 207%;
}

mjx-container [size="HG"] {
  font-size: 249%;
}

mjx-container [width="full"] {
  width: 100%;
}

mjx-box {
  display: inline-block;
}

mjx-block {
  display: block;
}

mjx-itable {
  display: inline-table;
}

mjx-row {
  display: table-row;
}

mjx-row > * {
  display: table-cell;
}

mjx-mtext {
  display: inline-block;
}

mjx-mstyle {
  display: inline-block;
}

mjx-merror {
  display: inline-block;
  color: red;
  background-color: yellow;
}

mjx-mphantom {
  visibility: hidden;
}

_::-webkit-full-page-media, _:future, :root mjx-container {
  will-change: opacity;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-c::before {
  display: block;
  width: 0;
}

.MJX-TEX {
  font-family: MJXZERO, MJXTEX;
}

.TEX-B {
  font-family: MJXZERO, MJXTEX-B;
}

.TEX-I {
  font-family: MJXZERO, MJXTEX-I;
}

.TEX-MI {
  font-family: MJXZERO, MJXTEX-MI;
}

.TEX-BI {
  font-family: MJXZERO, MJXTEX-BI;
}

.TEX-S1 {
  font-family: MJXZERO, MJXTEX-S1;
}

.TEX-S2 {
  font-family: MJXZERO, MJXTEX-S2;
}

.TEX-S3 {
  font-family: MJXZERO, MJXTEX-S3;
}

.TEX-S4 {
  font-family: MJXZERO, MJXTEX-S4;
}

.TEX-A {
  font-family: MJXZERO, MJXTEX-A;
}

.TEX-C {
  font-family: MJXZERO, MJXTEX-C;
}

.TEX-CB {
  font-family: MJXZERO, MJXTEX-CB;
}

.TEX-FR {
  font-family: MJXZERO, MJXTEX-FR;
}

.TEX-FRB {
  font-family: MJXZERO, MJXTEX-FRB;
}

.TEX-SS {
  font-family: MJXZERO, MJXTEX-SS;
}

.TEX-SSB {
  font-family: MJXZERO, MJXTEX-SSB;
}

.TEX-SSI {
  font-family: MJXZERO, MJXTEX-SSI;
}

.TEX-SC {
  font-family: MJXZERO, MJXTEX-SC;
}

.TEX-T {
  font-family: MJXZERO, MJXTEX-T;
}

.TEX-V {
  font-family: MJXZERO, MJXTEX-V;
}

.TEX-VB {
  font-family: MJXZERO, MJXTEX-VB;
}

mjx-stretchy-v mjx-c, mjx-stretchy-h mjx-c {
  font-family: MJXZERO, MJXTEX-S1, MJXTEX-S4, MJXTEX, MJXTEX-A ! important;
}

@font-face /* 0 */ {
  font-family: MJXZERO;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Zero.woff") format("woff");
}

@font-face /* 1 */ {
  font-family: MJXTEX;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Regular.woff") format("woff");
}

@font-face /* 2 */ {
  font-family: MJXTEX-B;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Bold.woff") format("woff");
}

@font-face /* 3 */ {
  font-family: MJXTEX-I;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Math-Italic.woff") format("woff");
}

@font-face /* 4 */ {
  font-family: MJXTEX-MI;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Italic.woff") format("woff");
}

@font-face /* 5 */ {
  font-family: MJXTEX-BI;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Math-BoldItalic.woff") format("woff");
}

@font-face /* 6 */ {
  font-family: MJXTEX-S1;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size1-Regular.woff") format("woff");
}

@font-face /* 7 */ {
  font-family: MJXTEX-S2;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size2-Regular.woff") format("woff");
}

@font-face /* 8 */ {
  font-family: MJXTEX-S3;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size3-Regular.woff") format("woff");
}

@font-face /* 9 */ {
  font-family: MJXTEX-S4;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size4-Regular.woff") format("woff");
}

@font-face /* 10 */ {
  font-family: MJXTEX-A;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_AMS-Regular.woff") format("woff");
}

@font-face /* 11 */ {
  font-family: MJXTEX-C;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Regular.woff") format("woff");
}

@font-face /* 12 */ {
  font-family: MJXTEX-CB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Bold.woff") format("woff");
}

@font-face /* 13 */ {
  font-family: MJXTEX-FR;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Fraktur-Regular.woff") format("woff");
}

@font-face /* 14 */ {
  font-family: MJXTEX-FRB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Fraktur-Bold.woff") format("woff");
}

@font-face /* 15 */ {
  font-family: MJXTEX-SS;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Regular.woff") format("woff");
}

@font-face /* 16 */ {
  font-family: MJXTEX-SSB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Bold.woff") format("woff");
}

@font-face /* 17 */ {
  font-family: MJXTEX-SSI;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Italic.woff") format("woff");
}

@font-face /* 18 */ {
  font-family: MJXTEX-SC;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Script-Regular.woff") format("woff");
}

@font-face /* 19 */ {
  font-family: MJXTEX-T;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Typewriter-Regular.woff") format("woff");
}

@font-face /* 20 */ {
  font-family: MJXTEX-V;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Vector-Regular.woff") format("woff");
}

@font-face /* 21 */ {
  font-family: MJXTEX-VB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Vector-Bold.woff") format("woff");
}
</style><style data-emotion="css"></style></head>
  <body data-theme="auto">
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NLGDMK5"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"></path>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <circle cx="12" cy="12" r="9"></circle>
      <path d="M13 12h5"></path>
      <path d="M13 15h4"></path>
      <path d="M13 18h1"></path>
      <path d="M13 9h4"></path>
      <path d="M13 6h1"></path>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">BentoML</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/logo.svg" alt="Logo">
  </div>
  
  <span class="sidebar-brand-text">BentoML</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial: Intro to BentoML</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../concepts/index.html">Main Concepts</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/model.html">Preparing Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/service.html">Service and APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/bento.html">Building Bentos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/runner.html">Using Runners</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/deploy.html">Deploying Bento</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../frameworks/index.html">Framework Guides</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../frameworks/catboost.html">CatBoost</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frameworks/fastai.html">fast.ai</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frameworks/keras.html">Keras</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frameworks/lightgbm.html">LightGBM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frameworks/onnx.html">ONNX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frameworks/picklable.html">Picklable Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frameworks/pytorch.html">PyTorch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frameworks/pytorch_lightning.html">PyTorch Lightning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frameworks/sklearn.html">Scikit-Learn</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frameworks/tensorflow.html">TensorFlow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frameworks/transformers.html">Transformers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frameworks/xgboost.html">XGBoost</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../guides/index.html">Advanced Guides</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/batching.html">Adaptive Batching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/containerization.html">Advanced Containerization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/client.html">Bento Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/server.html">Bento Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/envmanager.html">Environment Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/graph.html">Inference Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/monitoring.html">Inference Data Collection &amp; Model Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/metrics.html">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/performance.html">Performance Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/grpc.html">Serving with gRPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/gpu.html">Serving with GPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/tracing.html">Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/migration.html">1.0 Migration Guide</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Integrations</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="airflow.html">Airflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="arize.html">Arize AI</a></li>
<li class="toctree-l2"><a class="reference internal" href="flink.html">Flink</a></li>
<li class="toctree-l2"><a class="reference internal" href="kubeflow.html">Kubeflow</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">MLflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="spark.html">Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="triton.html">Triton Inference Server</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/index.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/core.html">Core Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/stores.html">Bento Store APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/api_io_descriptors.html">API IO Descriptors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/metrics.html">Metrics API</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/frameworks/index.html">Framework APIs</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/frameworks/onnx.html">ONNX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/frameworks/sklearn.html">Scikit-Learn</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/frameworks/transformers.html">Transformers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/frameworks/flax.html">Flax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/frameworks/tensorflow.html">TensorFlow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/frameworks/torchscript.html">TorchScript</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/frameworks/xgboost.html">XGBoost</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/frameworks/picklable_model.html">Picklable Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/frameworks/pytorch.html">PyTorch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/frameworks/lightgbm.html">LightGBM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/frameworks/mlflow.html">MLflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/frameworks/catboost.html">CatBoost</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/frameworks/fastai.html">fast.ai</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/frameworks/keras.html">Keras</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/frameworks/ray.html">Ray</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/cli.html">BentoML CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/batch.html">Batch Inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/exceptions.html">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/container.html">Container APIs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/bentoml/BentoML/tree/main/examples">Examples</a></li>
<li class="toctree-l1"><a class="reference external" href="https://l.linklyhq.com/l/ktOX">Community</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/bentoml/BentoML">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://modelserving.com">Blog</a></li>
</ul>

</div>

<div id="furo-sidebar-ad-placement" class="flat" data-ea-publisher="readthedocs" data-ea-type="readthedocs-sidebar" data-ea-manual="true"></div>
</div>

<div id="furo-readthedocs-versions" class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions" tabindex="0">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book">&nbsp;</span>
    v: latest
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      
        <dd><a href="/en/latest/">latest</a></dd>
      
        <dd><a href="/en/0.13-lts/">0.13-lts</a></dd>
      
    </dl>
    <dl>
      <dt>Downloads</dt>
      
    </dl>
    <dl>
      
      <dt>On Read the Docs</dt>
        <dd>
          <a href="//readthedocs.org/projects/bentoml/?fromdocs=bentoml">Project Home</a>
        </dd>
        <dd>
          <a href="//readthedocs.org/builds/bentoml/?fromdocs=bentoml">Builds</a>
        </dd>
    </dl>
  </div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/bentoml/bentoml/edit/main/docs/source/integrations/mlflow.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4"></path>
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5"></line>
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="mlflow">
<h1>MLflow<a class="headerlink" href="#mlflow" title="Permalink to this heading">#</a></h1>
<p><a class="reference external" href="https://mlflow.org/">MLflow</a> is an open source framework for tracking ML experiments,
packaging ML code for training pipelines, and capturing models logged from experiments.
It enables data scientists to iterate quickly during model development while keeping
their experiments and training pipelines reproducible.</p>
<p>BentoML, on the other hand, focuses on ML in production. By design, BentoML is agnostic
to the experimentation platform and the model development environment.</p>
<p>Comparing to the MLflow model registry, BentoML’s model format and model store is
designed for managing model artifacts that will be used for building, testing, and
deploying prediction services. It is best fitted to manage your “finalized model”, sets
of models that yield the best outcomes from your periodic training pipelines and are
meant for running in production.</p>
<p>BentoML integrates with MLflow natively. Users can not only port over models logged with
MLflow Tracking to BentoML for high-performance model serving but also combine MLFlow
projects and pipelines with BentoML’s model deployment workflow in an efficient manner.</p>
<section id="compatibility">
<h2>Compatibility<a class="headerlink" href="#compatibility" title="Permalink to this heading">#</a></h2>
<p>BentoML supports MLflow 0.9 and above.</p>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">#</a></h2>
<p>Besides this documentation, also check out code samples demonstrating BentoML and MLflow
integration at: <a class="reference external" href="https://github.com/bentoml/BentoML/tree/main/examples/mlflow">bentoml/examples: MLflow Examples</a>.</p>
</section>
<section id="import-an-mlflow-model">
<h2>Import an MLflow model<a class="headerlink" href="#import-an-mlflow-model" title="Permalink to this heading">#</a></h2>
<p><a class="reference external" href="https://www.mlflow.org/docs/latest/models.html">MLflow Model</a> is a format for saving
trained model artifacts in MLflow experiments and pipelines. BentoML supports importing
MLflow model to its own format for model serving. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mlflow</span><span class="o">.</span><span class="n">sklearn</span><span class="o">.</span><span class="n">save_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="s2">"./my_model"</span><span class="p">)</span>
<span class="n">bentoml</span><span class="o">.</span><span class="n">mlflow</span><span class="o">.</span><span class="n">import_model</span><span class="p">(</span><span class="s2">"my_sklearn_model"</span><span class="p">,</span> <span class="n">model_uri</span><span class="o">=</span><span class="s2">"./my_model"</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">():</span>
    <span class="n">mlflow</span><span class="o">.</span><span class="n">pytorch</span><span class="o">.</span><span class="n">log_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">artifact_path</span><span class="o">=</span><span class="s2">"pytorch-model"</span><span class="p">)</span>

    <span class="n">model_uri</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">get_artifact_uri</span><span class="p">(</span><span class="s2">"pytorch-model"</span><span class="p">)</span>
    <span class="n">bento_model</span> <span class="o">=</span> <span class="n">bentoml</span><span class="o">.</span><span class="n">mlflow</span><span class="o">.</span><span class="n">import_model</span><span class="p">(</span>
        <span class="s1">'mlflow_pytorch_mnist'</span><span class="p">,</span>
        <span class="n">model_uri</span><span class="p">,</span>
        <span class="n">signatures</span><span class="o">=</span><span class="p">{</span><span class="s1">'predict'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'batchable'</span><span class="p">:</span> <span class="kc">True</span><span class="p">}}</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">bentoml.mlflow.import_model</span></code> API is similar to the other <code class="docutils literal notranslate"><span class="pre">save_model</span></code> APIs
found in BentoML, where the first argument represent the model name in BentoML model
store. A new version will be automatically generated when a new MLflow model is
imported. Users can manage imported MLflow models same as models saved with other ML
frameworks:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bentoml<span class="w"> </span>models<span class="w"> </span>list<span class="w"> </span>mlflow_pytorch_mnist
</pre></div>
</div>
<p>The second argument <code class="docutils literal notranslate"><span class="pre">model_uri</span></code> takes a URI to the MLflow model. It can be a local
path, a <code class="docutils literal notranslate"><span class="pre">'runs:/'</span></code> URI, or a remote storage URI (e.g., an <code class="docutils literal notranslate"><span class="pre">'s3://'</span></code> URI). Here are
some example <code class="docutils literal notranslate"><span class="pre">model_uri</span></code> values commonly used in MLflow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">me</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">model</span>
<span class="o">../</span><span class="n">relative</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">model</span>
<span class="n">s3</span><span class="p">:</span><span class="o">//</span><span class="n">my_bucket</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">model</span>
<span class="n">runs</span><span class="p">:</span><span class="o">/&lt;</span><span class="n">mlflow_run_id</span><span class="o">&gt;/</span><span class="n">run</span><span class="o">-</span><span class="n">relative</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">model</span>
<span class="n">models</span><span class="p">:</span><span class="o">/&lt;</span><span class="n">model_name</span><span class="o">&gt;/&lt;</span><span class="n">model_version</span><span class="o">&gt;</span>
<span class="n">models</span><span class="p">:</span><span class="o">/&lt;</span><span class="n">model_name</span><span class="o">&gt;/&lt;</span><span class="n">stage</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="running-imported-model">
<h2>Running Imported Model<a class="headerlink" href="#running-imported-model" title="Permalink to this heading">#</a></h2>
<p>MLflow models imported to BentoML can be loaded back for running inference in a various
of ways.</p>
<section id="loading-original-model-flavor">
<h3>Loading original model flavor<a class="headerlink" href="#loading-original-model-flavor" title="Permalink to this heading">#</a></h3>
<p>For evaluation and testing purpose, sometimes it’s convenient to load the model in its
native form</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bento_model</span> <span class="o">=</span> <span class="n">bentoml</span><span class="o">.</span><span class="n">mlflow</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"mlflow_pytorch_mnist:latest"</span><span class="p">)</span>
<span class="n">mlflow_model_path</span> <span class="o">=</span> <span class="n">bento_model</span><span class="o">.</span><span class="n">path_of</span><span class="p">(</span><span class="n">bentoml</span><span class="o">.</span><span class="n">mlflow</span><span class="o">.</span><span class="n">MLFLOW_MODEL_FOLDER</span><span class="p">)</span>

<span class="n">loaded_pytorch_model</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">pytorch</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="n">mlflow_model_path</span><span class="p">)</span>
<span class="n">loaded_pytorch_model</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
<span class="n">loaded_pytorch_model</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>
<span class="k">with</span> <span class="n">torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">():</span>
    <span class="n">input_tensor</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">test_input_arr</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
    <span class="n">predictions</span> <span class="o">=</span> <span class="n">loaded_pytorch_model</span><span class="p">(</span><span class="n">input_tensor</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="loading-pyfunc-flavor">
<h3>Loading Pyfunc flavor<a class="headerlink" href="#loading-pyfunc-flavor" title="Permalink to this heading">#</a></h3>
<p>By default, <code class="docutils literal notranslate"><span class="pre">bentoml.mflow.load_model</span></code> will load the imported MLflow model using the
<a class="reference external" href="https://www.mlflow.org/docs/latest/python_api/mlflow.pyfunc.html">python_function flavor</a>
for best compatibility across all ML frameworks supported by MLflow.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pyfunc_model</span><span class="p">:</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">pyfunc</span><span class="o">.</span><span class="n">PyFuncModel</span> <span class="o">=</span> <span class="n">bentoml</span><span class="o">.</span><span class="n">mlflow</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="s2">"mlflow_pytorch_mnist:latest"</span><span class="p">)</span>
<span class="n">predictions</span> <span class="o">=</span> <span class="n">pyfunc_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">test_input_arr</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="using-model-runner">
<h3>Using Model Runner<a class="headerlink" href="#using-model-runner" title="Permalink to this heading">#</a></h3>
<p>Imported MLflow models can be loaded as BentoML Runner for best performance in building
prediction service with BentoML. To test out the runner API:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">runner</span> <span class="o">=</span> <span class="n">bentoml</span><span class="o">.</span><span class="n">mlflow</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"mlflow_pytorch_mnist:latest"</span><span class="p">)</span><span class="o">.</span><span class="n">to_runner</span><span class="p">()</span>
<span class="n">runner</span><span class="o">.</span><span class="n">init_local</span><span class="p">()</span>
<span class="n">runner</span><span class="o">.</span><span class="n">predict</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">input_df</span><span class="p">)</span>
</pre></div>
</div>
<p>Learn more about BentoML Runner at <a class="reference internal" href="../concepts/runner.html"><span class="doc">Using Runners</span></a>.</p>
<p>Runner created from an MLflow model supports the following input types. Note that for
some ML frameworks, only a subset of this list is supported.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">MLflowRunnerInput</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span><span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span>
<span class="n">MLflowRunnerOutput</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span><span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To use adaptive batching with a MLflow Runner, make sure to set
<code class="docutils literal notranslate"><span class="pre">signatures={'predict':</span> <span class="pre">{'batchable':</span> <span class="pre">True}}</span></code> when importing the model:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bento_model</span> <span class="o">=</span> <span class="n">bentoml</span><span class="o">.</span><span class="n">mlflow</span><span class="o">.</span><span class="n">import_model</span><span class="p">(</span>
    <span class="s1">'mlflow_pytorch_mnist'</span><span class="p">,</span>
    <span class="n">model_uri</span><span class="p">,</span>
    <span class="n">signatures</span><span class="o">=</span><span class="p">{</span><span class="s1">'predict'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'batchable'</span><span class="p">:</span> <span class="kc">True</span><span class="p">}}</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="optimizations">
<h3>Optimizations<a class="headerlink" href="#optimizations" title="Permalink to this heading">#</a></h3>
<p>There are two major limitations of using MLflow Runner in BentoML:</p>
<ul class="simple">
<li><p>Lack of support for GPU</p></li>
<li><p>Lack of support for multiple inference method</p></li>
</ul>
<p>A common optimization we recommend, is to save trained model instance directly with BentoML,
instead of importing MLflow pyfunc model. This makes it possible to run GPU inference and expose
multiple inference signatures.</p>
<ol class="arabic simple">
<li><p>Save model directly with bentoml</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mlflow</span><span class="o">.</span><span class="n">sklearn</span><span class="o">.</span><span class="n">log_model</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="s2">"model"</span><span class="p">)</span>
<span class="n">bentoml</span><span class="o">.</span><span class="n">sklearn</span><span class="o">.</span><span class="n">save_model</span><span class="p">(</span><span class="s2">"iris_clf"</span><span class="p">,</span> <span class="n">clf</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Load original flavor and save with BentoML</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">loaded_model</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">sklearn</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="n">model_uri</span><span class="p">)</span>
<span class="n">bentoml</span><span class="o">.</span><span class="n">sklearn</span><span class="o">.</span><span class="n">save_model</span><span class="p">(</span><span class="s2">"iris_clf"</span><span class="p">,</span> <span class="n">loaded_model</span><span class="p">)</span>
</pre></div>
</div>
<p>This way, it goes back to a typically BentoML workflow, which allow users to use a
Runner specifically built for the target ML framework, with GPU support and multiple
signatures available.</p>
</section>
</section>
<section id="build-prediction-service">
<h2>Build Prediction Service<a class="headerlink" href="#build-prediction-service" title="Permalink to this heading">#</a></h2>
<p>Here’s an example <code class="docutils literal notranslate"><span class="pre">bentoml.Service</span></code> built with a MLflow model:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">bentoml</span>
<span class="kn">import</span> <span class="nn">mlflow</span>
<span class="kn">import</span> <span class="nn">torch</span>

<span class="n">mnist_runner</span> <span class="o">=</span> <span class="n">bentoml</span><span class="o">.</span><span class="n">mlflow</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'mlflow_pytorch_mnist:latest'</span><span class="p">)</span><span class="o">.</span><span class="n">to_runner</span><span class="p">()</span>

<span class="n">svc</span> <span class="o">=</span> <span class="n">bentoml</span><span class="o">.</span><span class="n">Service</span><span class="p">(</span><span class="s1">'mlflow_pytorch_mnist'</span><span class="p">,</span> <span class="n">runners</span><span class="o">=</span><span class="p">[</span> <span class="n">mnist_runner</span> <span class="p">])</span>

<span class="n">input_spec</span> <span class="o">=</span> <span class="n">bentoml</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">NumpyNdarray</span><span class="p">(</span>
    <span class="n">dtype</span><span class="o">=</span><span class="s2">"float32"</span><span class="p">,</span>
    <span class="n">shape</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">28</span><span class="p">],</span>
    <span class="n">enforce_shape</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">enforce_dtype</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="nd">@svc</span><span class="o">.</span><span class="n">api</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">input_spec</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="n">bentoml</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">NumpyNdarray</span><span class="p">())</span>
<span class="k">def</span> <span class="nf">predict</span><span class="p">(</span><span class="n">input_arr</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">mnist_runner</span><span class="o">.</span><span class="n">predict</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">input_arr</span><span class="p">)</span>
</pre></div>
</div>
<p>To try out the full example, visit <a class="reference external" href="https://github.com/bentoml/BentoML/tree/main/examples/mlflow/pytorch">bentoml/examples: MLflow Pytorch Example</a>.</p>
</section>
<section id="mlflow-bentoml-workflow">
<h2>MLflow 🤝 BentoML Workflow<a class="headerlink" href="#mlflow-bentoml-workflow" title="Permalink to this heading">#</a></h2>
<p>There are numerous ways you can integrate BentoML with your MLflow workflow for model serving and deployment.</p>
<ol class="arabic simple">
<li><p>Find <code class="docutils literal notranslate"><span class="pre">model_uri</span></code> from a MLflow model instance returned from <code class="docutils literal notranslate"><span class="pre">log_model</span></code>:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># https://github.com/bentoml/BentoML/tree/main/examples/mlflow/sklearn_logistic_regression</span>
<span class="n">logged_model</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">sklearn</span><span class="o">.</span><span class="n">log_model</span><span class="p">(</span><span class="n">lr</span><span class="p">,</span> <span class="s2">"model"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Model saved in run </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">active_run</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">run_uuid</span><span class="p">)</span>

<span class="c1"># Import logged mlflow model to BentoML model store for serving:</span>
<span class="n">bento_model</span> <span class="o">=</span> <span class="n">bentoml</span><span class="o">.</span><span class="n">mlflow</span><span class="o">.</span><span class="n">import_model</span><span class="p">(</span><span class="s1">'logistic_regression_model'</span><span class="p">,</span> <span class="n">logged_model</span><span class="o">.</span><span class="n">model_uri</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Model imported to BentoML: </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="n">bento_model</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Find model artifact path inside current <code class="docutils literal notranslate"><span class="pre">mlflow.run</span></code> scope:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># https://github.com/bentoml/BentoML/tree/main/examples/mlflow/pytorch</span>
<span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">():</span>
    <span class="o">...</span>
    <span class="n">mlflow</span><span class="o">.</span><span class="n">pytorch</span><span class="o">.</span><span class="n">log_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">artifact_path</span><span class="o">=</span><span class="s2">"pytorch-model"</span><span class="p">)</span>
    <span class="n">model_uri</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">get_artifact_uri</span><span class="p">(</span><span class="s2">"pytorch-model"</span><span class="p">)</span>
    <span class="n">bento_model</span> <span class="o">=</span> <span class="n">bentoml</span><span class="o">.</span><span class="n">mlflow</span><span class="o">.</span><span class="n">import_model</span><span class="p">(</span><span class="s1">'mlflow_pytorch_mnist'</span><span class="p">,</span> <span class="n">model_uri</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>When using <code class="docutils literal notranslate"><span class="pre">autolog</span></code>, find <code class="docutils literal notranslate"><span class="pre">model_uri</span></code> by last active <code class="docutils literal notranslate"><span class="pre">run_id</span></code>:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mlflow</span>
<span class="kn">import</span> <span class="nn">bentoml</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LinearRegression</span>

<span class="c1"># enable autologging</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">sklearn</span><span class="o">.</span><span class="n">autolog</span><span class="p">()</span>

<span class="c1"># prepare training data</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]))</span> <span class="o">+</span> <span class="mi">3</span>

<span class="c1"># train a model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="c1"># import logged MLflow model to BentoML</span>
<span class="n">run_id</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">last_active_run</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">run_id</span>
<span class="n">artifact_path</span> <span class="o">=</span> <span class="s2">"model"</span>
<span class="n">model_uri</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"runs:/</span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">artifact_path</span><span class="si">}</span><span class="s2">"</span>
<span class="n">bento_model</span> <span class="o">=</span> <span class="n">bentoml</span><span class="o">.</span><span class="n">mlflow</span><span class="o">.</span><span class="n">import_model</span><span class="p">(</span><span class="s1">'logistic_regression_model'</span><span class="p">,</span> <span class="n">model_uri</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Model imported to BentoML: </span><span class="si">{</span><span class="n">bento_model</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Import a registered model on MLflow server</p></li>
</ol>
<p>When using a MLflow tracking server, users can also import
<a class="reference external" href="https://www.mlflow.org/docs/latest/model-registry.html#registering-a-model">registered models</a>
directly to BentoML for serving.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import from a version:</span>
<span class="n">model_name</span> <span class="o">=</span> <span class="s2">"sk-learn-random-forest-reg-model"</span>
<span class="n">model_version</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">model_uri</span><span class="o">=</span><span class="sa">f</span><span class="s2">"models:/</span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">model_version</span><span class="si">}</span><span class="s2">"</span>
<span class="n">bentoml</span><span class="o">.</span><span class="n">mlflow</span><span class="o">.</span><span class="n">import_model</span><span class="p">(</span><span class="s1">'my_mlflow_model'</span><span class="p">,</span> <span class="n">model_uri</span><span class="p">)</span>

<span class="c1"># Import from a stage:</span>
<span class="n">model_name</span> <span class="o">=</span> <span class="s2">"sk-learn-random-forest-reg-model"</span>
<span class="n">stage</span> <span class="o">=</span> <span class="s1">'Staging'</span>
<span class="n">model_uri</span><span class="o">=</span><span class="sa">f</span><span class="s2">"models:/</span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">stage</span><span class="si">}</span><span class="s2">"</span>
<span class="n">bentoml</span><span class="o">.</span><span class="n">mlflow</span><span class="o">.</span><span class="n">import_model</span><span class="p">(</span><span class="s1">'my_mlflow_model'</span><span class="p">,</span> <span class="n">model_uri</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="additional-tips">
<h2>Additional Tips<a class="headerlink" href="#additional-tips" title="Permalink to this heading">#</a></h2>
<section id="use-mlflow-model-dependencies-config">
<h3>Use MLflow model dependencies config<a class="headerlink" href="#use-mlflow-model-dependencies-config" title="Permalink to this heading">#</a></h3>
<p>Most MLflow models bundles dependency information that is required for running framework model.
If no additional dependencies are required in the <a class="reference internal" href="../reference/core.html#bentoml.Service" title="bentoml.Service"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Service</span></code></a> definition code, users may
pass through dependency requirements from within MLflow model to BentoML.</p>
<p>First, put the following in your <code class="docutils literal notranslate"><span class="pre">bentofile.yaml</span></code> build file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">python</span><span class="p">:</span>
<span class="w">    </span><span class="nt">requirements_txt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$BENTOML_MLFLOW_MODEL_PATH/mlflow_model/requirements.txt</span>
<span class="w">    </span><span class="nt">lock_packages</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
</pre></div>
</div>
<p>Alternatively, one can also use MLflow model’s generated conda environment file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">conda</span><span class="p">:</span>
<span class="w">    </span><span class="nt">environment_yml</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$BENTOML_MLFLOW_MODEL_PATH/mlflow_model/conda.yaml</span>
</pre></div>
</div>
<p>This allows BentoML to dynamically find the given dependency file based on a user-defined
environment variable. In this case, the <code class="docutils literal notranslate"><span class="pre">bentoml</span> <span class="pre">get</span></code> CLI returns the path to the target
MLflow model folder and expose it to <code class="docutils literal notranslate"><span class="pre">bentoml</span> <span class="pre">build</span></code> via the environment variable
<code class="docutils literal notranslate"><span class="pre">BENTOML_MLFLOW_MODEL_PATH</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">BENTOML_MLFLOW_MODEL_PATH</span><span class="o">=</span><span class="k">$(</span>bentoml<span class="w"> </span>models<span class="w"> </span>get<span class="w"> </span>my_mlflow_model:latest<span class="w"> </span>-o<span class="w"> </span>path<span class="k">)</span>
bentoml<span class="w"> </span>build
</pre></div>
</div>
</section>
<section id="attach-model-params-metrics-and-tags">
<h3>Attach model params, metrics, and tags<a class="headerlink" href="#attach-model-params-metrics-and-tags" title="Permalink to this heading">#</a></h3>
<p>MLflow model format encapsulates lots of context information regarding the training metrics
and parameters. The following code snippet demonstrates how to package metadata logged from a given MLflow model to the BentoML model store.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">run_id</span> <span class="o">=</span> <span class="s1">'0e4425ecbf3e4672ba0c1741651bb47a'</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span>
<span class="n">model_uri</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">run</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">artifact_uri</span><span class="si">}</span><span class="s2">/model"</span>
<span class="n">bentoml</span><span class="o">.</span><span class="n">mlflow</span><span class="o">.</span><span class="n">import_model</span><span class="p">(</span>
    <span class="s2">"my_mlflow_model"</span><span class="p">,</span>
    <span class="n">model_uri</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="n">run</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">tags</span><span class="p">,</span>
    <span class="n">metadata</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">"metrics"</span><span class="p">:</span> <span class="n">run</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">metrics</span><span class="p">,</span>
        <span class="s2">"params"</span><span class="p">:</span> <span class="n">run</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">params</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="spark.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Spark</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="kubeflow.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Kubeflow</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright © 2022-2023, bentoml.com
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/bentoml/bentoml" aria-label="GitHub"> 🍱 </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">MLflow</a><ul>
<li><a class="reference internal" href="#compatibility">Compatibility</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#import-an-mlflow-model">Import an MLflow model</a></li>
<li><a class="reference internal" href="#running-imported-model">Running Imported Model</a><ul>
<li><a class="reference internal" href="#loading-original-model-flavor">Loading original model flavor</a></li>
<li><a class="reference internal" href="#loading-pyfunc-flavor">Loading Pyfunc flavor</a></li>
<li><a class="reference internal" href="#using-model-runner">Using Model Runner</a></li>
<li><a class="reference internal" href="#optimizations">Optimizations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-prediction-service">Build Prediction Service</a></li>
<li><a class="reference internal" href="#mlflow-bentoml-workflow">MLflow 🤝 BentoML Workflow</a></li>
<li><a class="reference internal" href="#additional-tips">Additional Tips</a><ul>
<li><a class="reference internal" href="#use-mlflow-model-dependencies-config">Use MLflow model dependencies config</a></li>
<li><a class="reference internal" href="#attach-model-params-metrics-and-tags">Attach model params, metrics, and tags</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    <script src="../_static/js/hoverxref.js"></script>
    <script src="../_static/js/tooltipster.bundle.min.js"></script>
    <script src="../_static/js/micromodal.min.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script async="async" src="/_/static/javascript/readthedocs-doc-embed.js"></script>
    <script src="../_static/js/custom.js"></script>
    
<div id="PapercupsChatWidget"><iframe title="Papercups Chat Widget Container" class="Papercups-chatWindowContainer css-um7ixe" sandbox="allow-scripts allow-popups allow-same-origin allow-forms" src="https://chat-widget.papercups.io?accountId=25ad5fd9-293b-4e0f-9601-5b0cd7846b48&amp;baseUrl=https%3A%2F%2Fyatai-community-papercups.herokuapp.com&amp;closeable=1&amp;debug=0&amp;disableAnalyticsTracking=0&amp;greeting=Hi%20there%21%20How%20can%20I%20help%20you%3F%20If%20we%20couldn%27t%20get%20back%20to%20you%20in%20time%2C%20feel%20free%20to%20join%20our%20community%20on%20slack%20and%20post%20your%20question%20in%20the%20%23support%20channel%3A%20https%3A%2F%2Fl.linklyhq.com%2Fl%2FktOX&amp;inbox=ac3ebd50-fc10-4299-9a1c-496841b49a6f&amp;metadata=%7B%22os%22%3A%22Mac%20OS%20X%22%2C%22browser%22%3A%22Chrome%22%2C%22time_zone%22%3A%22America%2FLos_Angeles%22%2C%22current_url%22%3A%22https%3A%2F%2Fdocs.bentoml.org%2Fen%2Flatest%2Fintegrations%2Fmlflow.html%22%2C%22host%22%3A%22docs.bentoml.org%22%2C%22pathname%22%3A%22%2Fen%2Flatest%2Fintegrations%2Fmlflow.html%22%2C%22browser_version%22%3A%22111%22%2C%22screen_height%22%3A720%2C%22screen_width%22%3A1280%2C%22lib%22%3A%22web%22%2C%22insert_id%22%3A%22rq74ke2w3ju9ql9m%22%2C%22time%22%3A1679950945.667%7D&amp;primaryColor=%2347AFD1&amp;requireEmailUpfront=1&amp;showAgentAvailability=1&amp;subtitle=Ask%20us%20anything%20in%20the%20chat%20window%20below%20%F0%9F%98%8A&amp;title=Welcome%20to%20BentoML%21&amp;token=25ad5fd9-293b-4e0f-9601-5b0cd7846b48&amp;ts=1679950945131&amp;version=1.2.0" style="pointer-events: none; height: 0px; min-height: 0px; opacity: 0; transform: translateY(4px) translateZ(0px);">Loading...</iframe></div><div style="display: none; visibility: hidden;"><script src="https://t.jitsu.com/s/lib.js" data-key="js.jqho3vy91pn32tceppam.y74ysav0xrdi5kv13hdpfc" data-init-only="false" defer="defer"></script></div></body></html>